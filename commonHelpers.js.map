{"version":3,"file":"commonHelpers.js","sources":["../src/pixabay-api.js","../src/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst URL_BASE = 'https://pixabay.com/api/'\n\nconst API_KEY_PIXABAY = \"39287667-f1a1553e63cd5dc6035e5c951\";\n\nexport const apiService = {\n    url:URL_BASE,\n    params: {\n        key: API_KEY_PIXABAY,\n        q: \"\",\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        page:1,\n        per_page: 20\n    },\n \n    getPhotos(query = this.params.q) {\n        this.params.q = query;\n\n        return axios.get(this.url, {\n            params: this.params,\n        })\n    }\n}","export   function templateGallery(gallery){\n    return gallery.map(templateItemGallery).join(\"\")\n}\n\nfunction templateItemGallery(gallery_item){\n    const {\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads\n\n        \n    } = gallery_item\n\n\n    return (\n      `<div class=\"gallery__item\">\n        <a class=\"gallery__link\" href=\"${largeImageURL}\">\n          <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n        </a>\n        <div class=\"gallery__info\">\n          <p class=\"gallery__info-item\">\n            <b>Likes ${likes}</b>\n          </p>\n          <p class=\"gallery__info-item\">\n            <b>Views ${views}</b>\n          </p>\n          <p class=\"gallery__info-item\">\n            <b>Comments ${comments}</b>\n          </p>\n          <p class=\"gallery__info-item\">\n            <b>Downloads ${downloads}</b>\n          </p>\n        </div>\n      </div>`\n  \n    )\n    \n}\n\n// /**\n//  * \n//  * @param {HTMLDivElement} element \n//  */\nexport function renderGallery(element, html) {\n  element.insertAdjacentHTML(\"beforeend\", html)\n}\n\nexport function renderGalleryItem(element, html) {\n  element.insertAdjacentHTML(\"beforeend\", html)\n}\n\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nimport { apiService } from \"./pixabay-api\";\nimport { renderGallery, templateGallery } from \"./render-functions\";\n\n\nconst refs = {\n    gallery : document.querySelector('.gallery'),\n    form: document.querySelector('form'),\n    loadMoreBtn: document.querySelector('.load-more'),\n    searchButton: document.querySelector('#search-form button'),\n\n}\n\n// refs.loadMoreBtn.classList.add(\"visually-hidden\");\naddClassList(refs.loadMoreBtn, \"visually-hidden\")\n\nrefs.form.addEventListener('submit',handlerSubmitForm)\n\nasync function handlerSubmitForm (event){\n    event.preventDefault()\n\n    const {searchQuery} = refs.form.elements\n\n    const searchQueryValue = searchQuery.value.trim()\n\n    if(!searchQueryValue) {\n        iziToast.info({\n            message: `Pleace, enter data to search` ,\n            position: \"topRight\"\n        })\n        return\n    }\n\n    refs.searchButton.disabled = true;\n        \n    refs.loadMoreBtn.textContent = \"Loading....\"\n    // refs.loadMoreBtn.classList.remove(\"visually-hidden\")\n    removeClassList(refs.loadMoreBtn, \"visually-hidden\")\n\n    refs.gallery.innerHTML = \"\";\n\n    try {\n        const { data } = await apiService.getPhotos(searchQueryValue)\n        console.log(data)\n\n        const {hits, totalHits} = data;\n        console.log(hits)\n        console.log(totalHits)\n\n        if(!totalHits){\n            iziToast.error({\n                message: `Sorry, there are no images matching your search query. Please try again!`,\n                position: \"topRight\"\n                \n            })\n            return\n\n        }\n\n\n        iziToast.success({\n            message: `Hooray! We found ${totalHits} images.`,\n            position:\"topRight\"\n        })\n\n        const galleryHTML = templateGallery(hits)\n        renderGallery(refs.gallery, galleryHTML);\n\n        refs.searchButton.disabled = false;\n\n        const  lightbox = new SimpleLightbox('.gallery a', { /* options */ });\n        lightbox.refresh()\n\n        refs.loadMoreBtn.textContent = \"Load more\"\n        // refs.loadMoreBtn.classList.add(\"visually-hidden\")\n        addClassList(refs.loadMoreBtn, \"visually-hidden\")\n\n    } catch (error) {\n        console.log(\"ERROR\", error)\n\n        iziToast.error({\n            message: `Sorry there was an error`,\n            position:\"topRight\"\n        })\n\n\n        refs.searchButton.disabled = false;\n        // refs.loadMoreBtn.classList.add(\"visually-hidden\")\n        addClassList(refs.loadMoreBtn, \"visually-hidden\")\n    } finally{\n        refs.searchButton.disabled = false;\n        // refs.loadMoreBtn.classList.add(\"visually-hidden\")\n        addClassList(refs.loadMoreBtn, \"visually-hidden\")\n    }\n\n}\n\n\nfunction addClassList(element, className) {\n    element.classList.add(className)\n}\nfunction removeClassList(element, className) {\n    element.classList.remove(className)\n}"],"names":["URL_BASE","API_KEY_PIXABAY","apiService","query","axios","templateGallery","gallery","templateItemGallery","gallery_item","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderGallery","element","html","refs","addClassList","handlerSubmitForm","event","searchQuery","searchQueryValue","iziToast","removeClassList","data","hits","totalHits","galleryHTML","SimpleLightbox","error","className"],"mappings":"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"}